<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_162) on Sat Feb 02 18:57:35 CET 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>SwitchUserHelper (Communote 3.5 API)</title>
<meta name="date" content="2019-02-02">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SwitchUserHelper (Communote 3.5 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SwitchUserHelper.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/communote/server/core/security/SecurityHelper.html" title="class in com.communote.server.core.security"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/communote/server/core/security/SwitchUserNotAllowedException.html" title="class in com.communote.server.core.security"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/communote/server/core/security/SwitchUserHelper.html" target="_top">Frames</a></li>
<li><a href="SwitchUserHelper.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.communote.server.core.security</div>
<h2 title="Class SwitchUserHelper" class="title">Class SwitchUserHelper</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.communote.server.core.security.SwitchUserHelper</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <span class="typeNameLabel">SwitchUserHelper</span>
extends <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">This helper contains methods to switch a user context. Switch user means that the current
 authentication will be hold and another user will be set as authenticated allowing to do
 operations for the target user without him logging on. Typical use case is the message queue
 component, which only authenticated a system user and then process messages in the context of
 another user.

 The current authentication will be stored in a <code>SwitchUserGrantedAuthority</code> of the new user
 which then will be used when switching back.

 The target user will only have the roles as defined in <a href="../../../../../com/communote/server/core/security/SwitchUserHelper.html#ROLE_SWITCH_ORGINAL_USER"><code>ROLE_SWITCH_ORGINAL_USER</code></a>, all
 other roles will not be used as authority for the target user. Therefore the target user will not
 have client admin rights, even if the admin role is assigned in the database.

 The switching of a user is only allowed if the current user has a system role authority (</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Communote GmbH - <a href="http://www.communote.com/">http://www.communote.com/</a></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../com/communote/server/model/user/UserRole.html#ROLE_SYSTEM_USER"><code>UserRole.ROLE_SYSTEM_USER</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/communote/server/core/security/SwitchUserHelper.html#canSwitchUser--">canSwitchUser</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static org.springframework.security.core.Authentication</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/communote/server/core/security/SwitchUserHelper.html#getOriginalAuthentication--">getOriginalAuthentication</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/communote/server/core/security/SwitchUserHelper.html#isUserSwitched--">isUserSwitched</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static org.springframework.security.core.Authentication</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/communote/server/core/security/SwitchUserHelper.html#removeSwitchedUser--">removeSwitchedUser</a></span>()</code>
<div class="block">Throws an exception in case no switched user exists</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static org.springframework.security.core.Authentication</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/communote/server/core/security/SwitchUserHelper.html#switchUser-com.communote.server.model.user.User-">switchUser</a></span>(<a href="../../../../../com/communote/server/model/user/User.html" title="class in com.communote.server.model.user">User</a>&nbsp;targetUser)</code>
<div class="block">Switch the user to the target user.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="canSwitchUser--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>canSwitchUser</h4>
<pre>public static&nbsp;boolean&nbsp;canSwitchUser()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the current user can switch to another user</dd>
</dl>
</li>
</ul>
<a name="getOriginalAuthentication--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOriginalAuthentication</h4>
<pre>public static&nbsp;org.springframework.security.core.Authentication&nbsp;getOriginalAuthentication()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>if there is a switched user return the original one, returns null if there is no
         switched user</dd>
</dl>
</li>
</ul>
<a name="isUserSwitched--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isUserSwitched</h4>
<pre>public static&nbsp;boolean&nbsp;isUserSwitched()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if there is a currently switched user</dd>
</dl>
</li>
</ul>
<a name="removeSwitchedUser--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeSwitchedUser</h4>
<pre>public static&nbsp;org.springframework.security.core.Authentication&nbsp;removeSwitchedUser()</pre>
<div class="block">Throws an exception in case no switched user exists</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>remove a switched user</dd>
</dl>
</li>
</ul>
<a name="switchUser-com.communote.server.model.user.User-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>switchUser</h4>
<pre>public static&nbsp;org.springframework.security.core.Authentication&nbsp;switchUser(<a href="../../../../../com/communote/server/model/user/User.html" title="class in com.communote.server.model.user">User</a>&nbsp;targetUser)
                                                                   throws <a href="../../../../../com/communote/server/core/security/SwitchUserNotAllowedException.html" title="class in com.communote.server.core.security">SwitchUserNotAllowedException</a></pre>
<div class="block">Switch the user to the target user. Method will thrown an AccessDeniedException if the
 current user is not allowed to switch the user.

 No admin roles will be granted to the target user if even if its a client admin in the
 databse.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>targetUser</code> - the user to switch to</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>get the authentication for the target user</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../com/communote/server/core/security/SwitchUserNotAllowedException.html" title="class in com.communote.server.core.security">SwitchUserNotAllowedException</a></code> - in case the switching is not allowed</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SwitchUserHelper.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/communote/server/core/security/SecurityHelper.html" title="class in com.communote.server.core.security"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/communote/server/core/security/SwitchUserNotAllowedException.html" title="class in com.communote.server.core.security"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/communote/server/core/security/SwitchUserHelper.html" target="_top">Frames</a></li>
<li><a href="SwitchUserHelper.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019 <a href="https://communote.github.io/">Communote team</a>. All rights reserved.</small></p>
</body>
</html>
